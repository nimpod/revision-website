<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Revision website</title>

    <!-- include css stylesheets -->
    <link rel="stylesheet" href="../../../styles.css">

    <!-- include bootstrap CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

    <!-- google fonts -->
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">

    <!-- prettify.js -->
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=ruby&amp;skin=sunburst"></script>
</head>
<body>
    <!-- main navigation bar at top of window -->
    <nav class="mnb navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">

            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <i class="ic fa fa-bars"></i>
                </button>
                <div style="padding: 15px 0;">
                    <a href="#" id="msbo"><i class="ic fa fa-bars"></i></a>
                </div>
            </div> <!-- end of div.navbar-header -->

            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">More revision<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">CSC2023</a></li>
                            <li><a href="../computer-networks.html">CSC2026</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#">CSC1024</a></li>
                            <li><a href="#">CSC1021</a></li>
                            <li><a href="#">CSC1022</a></li>
                        </ul>
                    </li>
                    <li><a href="#"><i class="fa fa-bell-o"></i></a></li>
                    <li><a href="#"><i class="fa fa-comment-o"></i></a></li>
                </ul>
            </div> <!-- end of div.navbar-collapse -->
            
        </div> <!-- end of div.container-fluid -->
    </nav> <!-- end of main nav-bar -->

    <div class="msb" id="msb">
        <nav class="navbar navbar-default" role="navigation">

            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <div class="brand-wrapper">
                    <!-- Brand -->
                    <div class="brand-name-wrapper">
                        <a class="navbar-brand" href="../../../index.html">
                            NIMPOD
                        </a>
                    </div>
                </div>
            </div>

            <!-- Main Menu -->
            <div class="side-menu-container">
                <ul class="nav navbar-nav">

                    <li class="panel panel-default" id="dropdown">
                        <a data-toggle="collapse" href="#intro-dropdown">
                            1. Introduction to Computer Networks
                            <span class="caret"></span>                            
                        </a>
                        <div id="intro-dropdown" class="panel-collapse collapse">
                            <div class="panel-body">
                                <ul class="nav navbar-nav">
                                    <li><a href="../intro/what-is-a-computer-network.html">1.1. What is a computer network?</a></li>
                                    <li><a href="../intro/circuit-packet-switch.html">1.2. Circuit Switch/Packet Switch</a></li>
                                    <li><a href="../intro/network-topology.html">1.3. Network Topology</a></li>
                                    <li><a href="../intro/network-types.html">1.4. Types of networks</a></li>
                                    <li><a href="../intro/osi-model.html">1.5. OSI model</a></li>
                                </ul>
                            </div>
                        </div>
                    </li>

                    <li class="panel panel-default" id="dropdown">
                        <a data-toggle="collapse" href="#physical-dropdown">
                            2. Physical Layer
                            <span class="caret"></span>
                        </a>
                        <div id="physical-dropdown" class="panel-collapse collapse">
                            <div class="panel-body">
                                <ul class="nav navbar-nav">
                                    <li><a href="../physical/introduction-to-physical-layer.html">2.1. Introduction to the Physical Layer</a></li>
                                    <li><a href="../physical/transmission-media.html">2.2. Trasmission Media</a></li>
                                    <li><a href="../physical/communication-satellites.html">2.3. Communication Satellites</a></li>
                                    <li><a href="../physical/transmission-impairment.html">2.4. Transmission Impairment</a></li>
                                    <li><a href="../physical/encoding-modulation.html">2.5. Encoding and Modulation</a></li>
                                    <li><a href="../physical/simplex-duplex.html">2.6. Simplex and Duplex</a></li>
                                    <li><a href="../physical/parallel-serial.html">2.7. Parallel and Serial</a></li>
                                    <li><a href="../physical/multiplexing.html">2.8. Multiplexing</a></li>
                                    <li><a href="../physical/communication-systems.html">2.9. Communication Systems</a></li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    
                    <li class="active panel panel-default" id="dropdown">
                        <a data-toggle="collapse" href="#datalink-dropdown">
                            3. Data-Link Layer
                            <span class="caret"></span>
                        </a>
                        <div id="datalink-dropdown" class="panel-collapse collapse">
                            <div class="panel-body">
                                <ul class="nav navbar-nav">
                                    <li><a href="introduction-to-datalink-layer.html">3.1 Introduction to the Data-Link Layer</a></li>
                                    <li><a href="byte-count.html">3.2 Byte Count</a></li>
                                    <li><a href="byte-stuffing.html">3.3 Byte Stuffing</a></li>
                                    <li><a href="bit-stuffing.html">3.4 Bit Stuffing</a></li>
                                    <li><a href="parity-bit.html">3.5 Parity Bit</a></li>
                                    <li><a href="crc.html">3.6 Cyclic Redundancy Check (CRC)</a></li>
                                    <li><a href="hamming-distance.html">3.7 Hamming Distance</a></li>
                                    <li><a href="flow-control.html">3.8 Flow Control</a></li>
                                    <li><a href="hdlc.html">3.9 High Level Data Link Control (HDLC)</a></li>
                                    <li><a href="ppp.html">3.10 Point to Point Protocol (PPP)</a></li>
                                </ul>
                            </div>
                        </div>
                    </li>

                    <li class="panel panel-default" id="dropdown">
                        <a data-toggle="collapse" href="#mac-dropdown">
                            4. MAC Sublayer
                            <span class="caret"></span>                            
                        </a>
                        <div id="mac-dropdown" class="panel-collapse collapse">
                            <div class="panel-body">
                                <ul class="nav navbar-nav">
                                    <li><a href="../mac/introduction-to-mac-sublayer.html">4.1. Introduction to the MAC Sublayer</a></li>
                                    <li><a href="../mac/mac-address.html">4.2. MAC Address</a></li>
                                    <li><a href="../mac/aloha.html">4.3. Aloha</a></li>
                                    <li><a href="../mac/csma.html">4.4. CSMA</a></li>
                                    <li><a href="../mac/collision-free.html">4.5. Collision-free protocols</a></li>
                                    <li><a href="../mac/limited-contention.html">4.6. Limited Contention protocols</a></li>
                                    <li><a href="../mac/wireless-lan-protocols.html">4.7. Wireless LAN protocols</a></li>
                                    <li><a href="../mac/wired-lan.html">4.8. Wired LAN</a></li>
                                    <li><a href="../mac/wireless-lan.html">4.9. Wireless LAN</a></li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    
                    <li class="panel panel-default" id="dropdown">
                        <a data-toggle="collapse" href="#network-dropdown">
                            5. Network Layer
                            <span class="caret"></span>                            
                        </a>
                        <div id="network-dropdown" class="panel-collapse collapse">
                            <div class="panel-body">
                                <ul class="nav navbar-nav">
                                    <li><a href="../network/introduction-to-network-layer.html">5.1. Introduction to the Network Layer</a></li>
                                    <li><a href="../network/services.html">5.2. Services</a></li>
                                    <li><a href="../network/internetworking.html">5.3. Internetworking</a></li>
                                    <li><a href="../network/tunelling.html">5.4. Tunelling</a></li>
                                    <li><a href="../network/packet-fragmentation.html">5.5. Packet Fragmentation</a></li>
                                    <li><a href="../network/dns-server.html">5.6. DNS Server</a></li>
                                    <li><a href="../network/internet-protocol.html">5.7. Internet Protocol (IP)</a></li>
                                    <li><a href="../network/mobile-ip.html">5.8. Mobile IP</a></li>
                                    <li><a href="../network/other-internet-protocols.html">5.9. Other Internet Protocols</a></li>
                                    <li><a href="../network/routing-algorithms.html">5.10. Routing Algorithms</a></li>
                                    <li><a href="../network/congestion-control.html">5.11. Congestion Control</a></li>
                                </ul>
                            </div>
                        </div>
                    </li>

                    <li><a href="#"></span> 6. Transport Layer</a></li>
                    <li><a href="../acronyms.html">Acronyms</a></li>
                    <li><a href="../terms.html">Terms</a></li>
                    <li><a href="../formulas.html">Formulas</a></li>

                </ul> <!-- end of ul.navbar -->

            </div><!--  end of div.side-menu-container -->
        </nav>
    </div> <!-- end of main side-bar (msb) div -->

    <div class="mcw">
        <!--navigation here-->
        <!--main content view-->
        <div class="cv">
            <div>
            <div class="inbox">
                <div class="inbox-sb">
                
                </div>
                <div class="inbox-bx container-fluid">
                    <h1>Byte Stuffing</h1>
                    <hr>

                    <p>The safer way to do this, is to do <b>byte stuffing</b> (with start and end flag bytes).</p>
                    <p><i>Figure 3.3a</i> below shows format of a frame when using byte stuffing:</p>
                    <img src="../../../img/frame-format.png"><br><br>

                    <h3>Data Transparency Problem</h3>
                    <p>This is when by chance <b>a flag byte somehow appears in the payload</b>. What a coinkydink.</p>
                    <p>It causes the protocol software to incorrectly assume that the frame was finished too early.</p>
                    <p>Solution to this problem - put an ESC byte before the coinkydink FLAG byte.</p>

                    <div class="example-question"> <b>Example 0a</b> <br>---------<br>
                    payload = <span class="not-stuffed">FLAG</span> <br>
                    ∴ payload after byte stuffing = <span class="stuffed">ESC</span> <span class="not-stuffed">FLAG</span>
                    </div>

                    <p>ESC tells the protocol software to consider the next byte as part of the payload.</p>
                    <p>Hence the name 'Byte Stuffing' because we are stuffing ESC bytes.</p>
                    
                    <br><br>
                    <h4>Double coinkydink problem:</h4>
                    <p>What if 'ESC FLAG' originally appears in the payload?</p>
                    <p>Just put an ESC byte before the coinkydink ESC byte, and an ESC byte before the coinkydink FLAG byte.</p>
                    <p>So we have to escape the escape!</p>

                    <div class="example-question"> <b>Example 0b</b> <br>---------<br>
                    payload = <span class="not-stuffed">ESC</span> <span class="not-stuffed">FLAG</span> <br>
                    ∴ payload after byte stuffing = <span class="stuffed">ESC</span> <span class="not-stuffed">ESC</span> <span class="stuffed">ESC</span> <span class="not-stuffed">FLAG</span>
                    </div>

                    <p>Example 1 and 2 were just some introductory examples to get you used to the concept. However, if we get asked this in an exam, if you put your final answer as  'ESC ESC ESC FLAG'  you would get <b>NO MARKS</b>.</p>
                    <p>Why? Because there are two more things we have to do:</p>
                    <ol>
                        <li>Add the flag byte to the <b>beginning</b> and <b>end</b> of the frame.</li>
                        <li>Show the <b>bit representation</b> rather than the byte representation.</li>
                    </ol><br>
                    
                    <p>So instead of typing in  'ESC ESC ESC FLAG'  what you should do is add the beginning and ending flag bytes.</p>
                    <div class="example-question">FLAG <span class="stuffed">ESC</span> <span class="not-stuffed">ESC</span> <span class="stuffed">ESC</span> <span class="not-stuffed">FLAG</span> FLAG</div>
                    <p>And then you would convert each byte into binary (assume FLAG=01111110 and ESC=10101010)</p>
                    <div class="example-question">01111110 <span class="stuffed">10101010</span> <span class="not-stuffed">10101010</span> <span class="stuffed">10101010</span> <span class="not-stuffed">01111110</span> 01111110</div>
                    <p>And that bit representation is your final answer.</p> <br>

                    <h3>Examples</h3>
                    <hr>
                    
                    <div class="example-question"> <b>Example 1</b> <br>---------<br>
                    payload = <span class="not-stuffed">A</span> <span class="not-stuffed">FLAG</span> <span class="not-stuffed">B</span> <br>
                    ∴ payload after byte stuffing = <span class="not-stuffed">A</span> <span class="stuffed">ESC</span> <span class="not-stuffed">FLAG</span> <span class="not-stuffed">B</span> <br>
                    </div>

                    <div class="example-question"> <b>Example 2</b> <br>---------<br>
                    payload = <span class="not-stuffed">A</span> <span class="not-stuffed">ESC</span> <span class="not-stuffed">B</span> <br>
                    ∴ payload after byte stuffing = <span class="not-stuffed">A</span> <span class="stuffed">ESC</span> <span class="not-stuffed">ESC</span> <span class="not-stuffed">B</span> <br>
                    </div>

                    <div class="example-question"> <b>Example 3</b> <br>---------<br>
                    payload = <span class="not-stuffed">A</span> <span class="not-stuffed">ESC</span> <span class="not-stuffed">FLAG</span> <span class="not-stuffed">B</span> <br>
                    ∴ payload after byte stuffing = <span class="not-stuffed">A</span> <span class="stuffed">ESC</span> <span class="not-stuffed">ESC</span> <span class="stuffed">ESC</span> <span class="not-stuffed">FLAG</span> <span class="not-stuffed">B</span> <br>
                    </div>

                    <div class="example-question"> <b>Example 4</b> <br>---------<br>
                    payload = <span class="not-stuffed">A</span> <span class="not-stuffed">ESC</span> <span class="not-stuffed">ESC</span> <span class="not-stuffed">B</span> <br>
                    ∴ payload after byte stuffing = <span class="not-stuffed">A</span> <span class="stuffed">ESC</span> <span class="not-stuffed">ESC</span> <span class="stuffed">ESC</span> <span class="not-stuffed">ESC</span> <span class="not-stuffed">B</span> <br>
                    </div>

                    <div class="button-bar">
                        <a href="byte-count.html" class="button prev">Previous</a>
                        <a href="bit-stuffing.html" class="button next">Next</a>
                    </div>

                </div>
            </div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="../../../funky.js"></script>
</body>
</html>